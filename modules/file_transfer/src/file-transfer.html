<!DOCTYPE html>
<html lang="en">
  <head>
    <title>${our} - File Transfer</title>
    <meta charset="utf-8" />
    <link rel="icon" href="data:image/vnd.microsoft.icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAqhP/x////AP///wAqhP//KoT//////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/4xwJ////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ACmE/7MqhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+N4hJ////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AK4X/zP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/9twjHf///wD///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wD///8AKoT//////wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////ACqE//////8A////AP///wD///8A////ACqE//8qhP/D////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CCx////AP///wAqhP//////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP////8A////ACqE//////8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/////wAqhP//KoT//////wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//yqE//8qhP///98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwfyyqE//8qhP//////AP///wAqhP//K4X/zP///wAqhP//////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//KoT//yqE////3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/KoT//yqE//////8A////ACqE//8rhf/M////ACqE//////8A////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//KoT////fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP8qhP//KoT//////wD///8AKoT//yuF/8z///8AKoT//////wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//yqE//8qhP//Lob7wPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/yqE//8qhP//////AP///wAqhP//K4X/zP///wAqhP//////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//KoT//yqE//8thvvL+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/KoT//yqE//////8A////ACqE//8rhf/M////ACqE//////8A////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//KoT////fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP8qhP//KoT//////wD///8AKoT//yuF/8z///8AKoT//////wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//yqE//8qhP///98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/yqE//8qhP//////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//KoT//yqE////3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53B/7AKr/AyqE//////8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/////wD///8AKoT//////wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//////wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wAqhP//////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8AKoT/kf///wD///8A////AP///wD///8AKoT//yqE//////8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP7///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT/3SqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wD///8A////AP///wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//rcIL3///8A////AP///wD///8A////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wD///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8A////ACuF/8z///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg9////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAKr/AyqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//Z////mff/+Znx//mZ8P/pmfB/yZnwP8mZ8B/JmfAPyZnwDsm+cAbJ/jAGyf4QBMn+AADL/gAAy/4AAMv+AADL/gAAy/4AAMv+AADJ/gAAyf4QBsn+MAbJvnAHyZnwD8mZ8A/JmfAfyZnwP+mZ8H/5mfD/+Znx//+Z9///mf/8=">
    <meta httpEquiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1.00001, viewport-fit=cover" />
    <link href='https://fonts.googleapis.com/css?family=Press Start 2P' rel='stylesheet'>

    <style>
      :root {
        --uq-vlightpurple: #d9dcfc;
        --uq-lightpurple: #c7cafa;
        --uq-purple: #727bf2;
        --uq-darkpurple: #5761ef;
        --midnightpurp: #0a1170;
        --forgottenpurp: #45475e;
        --uq-lightpink: #f3ced2;
        --uq-pink: #dd7c8a;
        --uq-darkpink: #cd3c52;
        --blush: #d55d6f;
        --celeste: #adebe5;
        --lturq: #6bdbd0;
        --turq: #3acfc0;
        --celadon: #21897e;
        --deep-jungle: #14524c;
        --old-mint: #659792;
        --washed-gray: rgba(0, 0, 0, 0.03);
        --light-gray: rgba(0, 0, 0, 0.1);
        --medium-gray: rgba(0, 0, 0, 0.2);
        --dark-gray: rgba(0, 0, 0, 0.5);
        --charcoal: #333;
      }

      body {
        margin: 0;
        padding: 0;
        font-size: 16px;
        font-family: 'Press Start 2P';
        background-color: #027;
        color: white;
      }

      h1,h2,h3,h4,h5,h6 {
        line-height: 1.5em;
      }

      .col {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .row {
        display: flex;
        flex-direction: row;
        align-items: center;
      }

      input[type="text"], input[type="password"] {
        width: 100%;
        padding: 0.5em 0.75em;
        margin-bottom: 0.5em;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 1em;
      }

      button {
        width: 100%;
        padding: 1em;
        margin-bottom: 0.5em;
        border: 1px solid var(--uq-pink);
        border-radius: 4px;
        box-sizing: border-box;
        background-color: var(--uq-pink);
        cursor: pointer;
        font-size: 1em;
        transition: all .1s;
        box-shadow: 0 1px 2px var(--uq-darkpink);
        font-family: 'Press Start 2P';
        color: white;
        margin-top: 1em;
      }

      button:hover {
        background-color: var(--uq-darkpink);
        border: 1px solid var(--uq-darkpink);
      }

      #home-page {
        width: 100%;
        height: 100%;
        flex: 1;
        display: flex;
        padding: 2em;
        max-width: calc(100vw - 4em);
      }

      label {
        font-size: 0.75em;
      }

      .label-row {
        margin: 0.5em 0;
        align-self: flex-start;
      }

      .tooltip-container {
        position: relative;
        display: inline-block;
        cursor: pointer;
      }

      .tooltip-button {
        border: 2px solid white;
        border-radius: 50%;
        height: 1em;
        width: 1em;
        text-align: center;
        font-size: 16px;
        line-height: 0.5em;
        margin-left: 0.5em;
      }

      .tooltip-content {
        visibility: hidden;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 0.5em;
        position: absolute;
        z-index: 1;
        top: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        transition: opacity 0.3s;
        font-family: sans-serif;
        line-height: 1.5em;
        min-width: 200px;
      }

      .tooltip-content::after {
        content: "";
        position: absolute;
        bottom: 100%;
        left: 30%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: transparent transparent #555 transparent;
      }

      .tooltip-container:hover .tooltip-content {
        visibility: visible;
        opacity: 1;
      }

      p {
        line-height: 1.5em;
      }

      .files {
        min-width: 800px;
        max-width: 90vw;
        align-items: flex-start;
        flex-wrap: wrap;
      }

      .files > .col {
        width: 50%;
        min-width: 400px;
      }

      .file-list {
        width: 100%;
      }

      .remote-file {
        width: 100%;
        justify-content: space-between;
        margin: 1em 0 0;
      }

      .file-name {
        font-size: 1em;
        word-break: break-all;
        line-height: 1.5em;
      }

      #remote-file-list-container, #our-file-list-container {
        width: 100%;
      }

      #our-file-list-container .file-name {
        margin-bottom: 1em;
      }

      .go-back {
        text-decoration: underline;
        cursor: pointer;
      }

      button.small {
        width: auto;
        padding: 0.5em 1em;
        font-size: 0.75em;
      }

      #transfer-progress {
        width: 100%;
      }

      #transfer-progress-bar {
        width: 100%;
        height: 2.5em;
        border: 1px solid var(--uq-pink);
        border-radius: 2px;
        box-sizing: border-box;
        cursor: pointer;
        font-size: 1em;
        transition: all .1s;
        margin-top: 1em;
        position: relative;
      }
      #transfer-progress-bar-inner {
        width: 0%;
        height: 100%;
        background-color: var(--uq-pink);
        transition: width 0.1s;
      }
      #transfer-progress-bar-text {
        font-family: 'Press Start 2P';
        color: white;
        position: absolute;
        top: 0.75em;
        left: 1em;
      }
    </style>
  </head>
  <body>
    <div id="home-page" class="col">
      <div id="home-form-header" class="row" style="justify-content: center;">
        <img style="margin: 0 1em 0.2em 0;" src="data:image/vnd.microsoft.icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAqhP/x////AP///wAqhP//KoT//////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/4xwJ////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ACmE/7MqhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+N4hJ////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AK4X/zP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/9twjHf///wD///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wD///8AKoT//////wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////ACqE//////8A////AP///wD///8A////ACqE//8qhP/D////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CCx////AP///wAqhP//////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP////8A////ACqE//////8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/////wAqhP//KoT//////wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//yqE//8qhP///98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwfyyqE//8qhP//////AP///wAqhP//K4X/zP///wAqhP//////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//KoT//yqE////3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/KoT//yqE//////8A////ACqE//8rhf/M////ACqE//////8A////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//KoT////fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP8qhP//KoT//////wD///8AKoT//yuF/8z///8AKoT//////wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//yqE//8qhP//Lob7wPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/yqE//8qhP//////AP///wAqhP//K4X/zP///wAqhP//////AP///wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//KoT//yqE//8thvvL+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/KoT//yqE//////8A////ACqE//8rhf/M////ACqE//////8A////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//KoT////fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP8qhP//KoT//////wD///8AKoT//yuF/8z///8AKoT//////wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//yqE//8qhP///98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/yqE//8qhP//////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8A////AP///wD///8A////AP///wD///8AKoT//yqE//8qhP//KoT//yqE////3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53B/7AKr/AyqE//////8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//yqE//8qhP//////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg/////wD///8AKoT//////wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//KoT//////wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wAqhP//////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8AKoT/kf///wD///8A////AP///wD///8AKoT//yqE//////8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/+dwg//ncIP7///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT/3SqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wD///8A////AP///wD///8AKoT//yuF/8z///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP/53CD/+dwg//rcIL3///8A////AP///wD///8A////AP///wAqhP//K4X/zP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/+dwg//ncIP/53CD/////AP///wD///8A////AP///wD///8A////ACqE//8rhf/M////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg//ncIP/53CD/+dwg/////wD///8A////AP///wD///8A////AP///wD///8A////ACuF/8z///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEPncIP/53CD/+dwg//ncIP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD/3yAQ+dwg//ncIP/53CD/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8AKoT//yqE//////8A////AP///wD///8A////AP/fIBD53CD/+dwg9////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ACqE//8qhP//////AP///wAqhP//KoT//////wD///8A////AP///wD///8A/98gEP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAKr/AyqE//////8A////ACqE//8qhP//////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//Z////mff/+Znx//mZ8P/pmfB/yZnwP8mZ8B/JmfAPyZnwDsm+cAbJ/jAGyf4QBMn+AADL/gAAy/4AAMv+AADL/gAAy/4AAMv+AADJ/gAAyf4QBsn+MAbJvnAHyZnwD8mZ8A/JmfAfyZnwP+mZ8H/5mfD/+Znx//+Z9///mf/8=" />
        <h1 style="text-align: center;">Uqbar</h1>
      </div>
      <h3 id="uq-name">File Transfer</h3>

      <div class="row files">
        <div class="col">
          <h4>Your Files</h4>
          <div id="our-file-list" class="col file-list">
            <div id="our-file-list-container" class="col"></div>
          </div>
        </div>
        <div class="col">
          <h4 id="remote-files">Remote Files</h4>
          <form id="view-files-form" class="col">
            <div class="col" style="width: 100%; align-items: flex-start;">
              <label for="target-node" style="margin-bottom: 0.5em;">Target Node:</label>
              <input type="text" name="target-node" id="target-node" />
            </div>
            <button type="submit">Get File List</button>
          </form>
          <div id="remote-file-list" class="col file-list" style="display: none;">
            <div onclick="enterNewRemote()" class="go-back">Go Back</div>
            <div id="remote-file-list-container" class="col"></div>
          </div>
          <div id="transfer-progress" class="col" style="display: none;">
            <div id="transfer-progress-bar">
              <div id="transfer-progress-bar-inner"></div>
              <div id="transfer-progress-bar-text">starting...</div>
            </div>
            <button onclick="cancelTransfer()">Cancel Transfer</button>
          </div>
        </div>
      </div>

    </div>
    <div id="our" data-value="${our}"></div>
    <script>
      const ONE_SECOND = 1000

      let currentTarget = null
      let currentFile = null
      let progressInterval = null

      async function getOurFiles() {
        const ourName = document.getElementById('our')?.attributes?.['data-value']?.value
        if (!ourName) return

        const result = await fetch(`${window.location.pathname}/view-files/${ourName}`.replace('//', '/')).then(r => r.json()).catch(() => null)
        if (!result || !result.ReadDir) return

        const files = result.ReadDir

        const fileListContainer = document.getElementById('our-file-list-container')
        if (files.length === fileListContainer.children.length) return

        fileListContainer.innerHTML = ''
        files.forEach(file => {
          const fileDiv = document.createElement('div')
          fileDiv.classList.add('row')
          fileDiv.innerHTML = `
            <div class="file-name">${file.uri_string}</div>
          `
          fileListContainer.appendChild(fileDiv)
        })
      }

      async function viewFiles (e) {
        e.preventDefault();
        e.stopPropagation();

        try {
          const targetNode = document.getElementById('target-node').value
          const ourName = document.getElementById('our')?.attributes?.['data-value']?.value

          if (!targetNode) return

          if (targetNode === ourName) {
            alert('Your own files are on the left.')
            document.getElementById('target-node').value = ''
            return
          }

          const result = await fetch(`${window.location.pathname}/view-files/${targetNode}`.replace('//', '/')).then(r => r.json()).catch(() => null)
          console.log('READ DIR RESULT:')

          if (!result || !result.ReadDir) {
            alert('Error viewing files')
            return
          }

          document.getElementById('target-node').value = ''
          currentTarget = targetNode
          document.getElementById('remote-files').textContent = `${targetNode}'s Files`

          const files = result.ReadDir
          document.getElementById('view-files-form').style.display = 'none'
          document.getElementById('remote-file-list').style.display = 'flex'
          const fileListContainer = document.getElementById('remote-file-list-container')
          fileListContainer.innerHTML = ''
          files.forEach(file => {
            const fileDiv = document.createElement('div')
            fileDiv.classList.add('remote-file')
            fileDiv.classList.add('row')
            fileDiv.innerHTML = `
                <div class="file-name">${file.uri_string}</div>
                <button class="small" onclick="getFile('${file.uri_string}')">Download</button>
            `
            fileListContainer.appendChild(fileDiv)
          })
        } catch (e) {
          alert('Error viewing files')
        }
      }

      async function getFile(fileName) {
        currentFile = fileName
        document.getElementById('transfer-progress-bar-inner').style.width = '0%'
        document.getElementById('transfer-progress').style.display = 'flex'
        document.getElementById('remote-file-list').style.display = 'none'

        await fetch(`${window.location.pathname}/get-file`.replace('//', '/'), {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            target_node: currentTarget,
            uri_string: fileName,
            chunk_size: 63000,
          })
        })

        progressInterval = setInterval(async () => {
          try {
            const result = await fetch(`${window.location.pathname}/status/${currentTarget}/${currentFile}`.replace('//', '/'))
            const progress = await result.text()

            const currentStatus = document.getElementById('transfer-progress-bar-text').innerText
            const isInProgress = currentStatus !== 'starting...' && currentStatus !== '0%'
            console.log('PROGRESS:', progress)

            document.getElementById('transfer-progress-bar-text').innerText = `${progress}%`
            document.getElementById('transfer-progress-bar-inner').style.width = `${progress}%`

            if (progress === '100' || (progress === '0' && isInProgress)) {
              clearInterval(progressInterval)
              currentFile = null
              document.getElementById('transfer-progress').style.display = 'none'
              document.getElementById('remote-file-list').style.display = 'flex'
              getOurFiles()
            }
          } catch {}
        }, ONE_SECOND * 2)
      }

      async function cancelTransfer() {
        if (!currentFile) return
        try {
          await fetch(`${window.location.pathname}/cancel-download`.replace('//', '/'), {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ target_node: currentTarget, uri_string: currentFile })
          })
          document.getElementById('transfer-progress').style.display = 'none'
          document.getElementById('remote-file-list').style.display = 'flex'
          document.getElementById('transfer-progress-bar-text').innerText = 'starting...'
          document.getElementById('transfer-progress-bar-inner').style.width = '0%'
          clearInterval(progressInterval)
          progressInterval = null
          currentFile = null
        } catch {}
      }

      function enterNewRemote() {
        currentTarget = null
        document.getElementById('view-files-form').style.display = 'flex'
        document.getElementById('remote-file-list').style.display = 'none'
        document.getElementById('target-node').value = ''
        document.getElementById('remote-file-list-container').innerHTML = ''
        document.getElementById('remote-files').textContent = 'Remote Files'
      }

      const viewFilesForm = document.getElementById('view-files-form')
      viewFilesForm.addEventListener('submit', viewFiles)

      document.addEventListener('DOMContentLoaded', () => {
        getOurFiles()
        setInterval(getOurFiles, ONE_SECOND * 10)
      })
    </script>
  </body>
</html>
